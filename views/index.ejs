<% title = "Forum" %>

<div class="forum-container">
  <% if (locals.user) { %>
    <div class="create-post">
      <h3>Create New Post</h3>
      <form method="POST" action="/create-post" class="post-form">
        <div class="form-group">
          <label for="title">Title:</label>
          <input type="text" id="title" name="title" required>
        </div>
        <div class="form-group">
          <label for="content">Content:</label>
          <textarea id="content" name="content" rows="4" required></textarea>
        </div>
        <button type="submit">Create Post</button>
      </form>
    </div>
    <hr style="border-color: #444; margin: 20px 0;">
  <% } %>
  <% posts.forEach(post => { %>
    <div class="post">
      <div class="post-user">
        <img src="<%= post.avatar %>" alt="pfp">
        <div><strong><%= post.username %></strong></div>
        <div class="badges">
          <% post.badges.forEach(b => { %>
            <span class="badge <%= b %>"><%= b %></span>
          <% }) %>
        </div>
      </div>
      <div class="post-content">
        <h3><a href="/post/<%= post.id %>"><%= post.title %></a></h3>
        <p><%= post.content %></p>
      </div>
    </div>
  <% }) %>
</div>
